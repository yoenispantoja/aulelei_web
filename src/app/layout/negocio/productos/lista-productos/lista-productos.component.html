<div [@routerTransition]>
  <div class="titlePage">
    <app-page-header [heading]="'Listado de productos por categoría'" [icon]="'fa-pencil-square'"></app-page-header>
    <a routerLink="/admin/productos/adicionar-productos" [routerLinkActive]="['router-link-active']"
      class="btn btn-sm btn-primary linkAdicionar">
      <i class=" fa fa-plus-circle"></i> Nuevo producto
    </a>
  </div>
  <div class="row">
    <div class="col-md-12">
      <ng-container>
        <ngb-accordion [closeOthers]="true">
          <ngb-panel id='{{categoria.id}}' *ngFor="let categoria of this.categoriasProductos" >
            <ng-template ngbPanelTitle>
                <img class="avatarCategoria" src="{{categoria.id+'.png' | imagen:'categorias_servicios':0}}" alt=""
                    width="30px"> {{categoria.nombre}}
                  <span class="badge badge-pill badge-info">{{categoria.productos.length}}</span>
            </ng-template>
            <ng-template ngbPanelContent>
              <table class="table table-bordered table-responsive table-striped" style="width:100%" *ngIf="categoria.productos.length>0" >
                <thead>
                <tr>
                  <th width="10%"></th>
                  <th width="20%">Nombre</th>
                  <th>Descripción</th>
                  <th width="10%" class="text-center">UM</th>
                  <th width="10%" class="text-center">Precio</th>
                  <th class="text-center">Cant.</th>
                  <th class="text-center">Disponible</th>
                  <th width="10%"></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let producto of categoria.productos">
                  <td><img src="{{producto.avatar | imagen:'producto':producto.id}}" alt="" width="60px"> </td>
                  <td>
                    <div class="detalleProducto">
                      <p>{{producto.nombre}}</p>
                      <p class="lblCodigo"><strong>Ref:</strong> {{producto.codigo}}</p>
                    </div>
                  </td>
                  <td>{{producto.descripcion}}</td>
                  <td class="text-center">{{producto.um}}</td>
                  <td class="text-center"><h1 class="badge badge-pill badge-secondary precio">{{producto.precio |currency}}</h1></td>
                  <td class="text-center">{{producto.cantidad_stock}}</td>
                  <td class="text-center">{{producto.disponible==1?'Sí':'No'}}</td>
                  <td class="botonesAccion"><i class="fa fa-edit text-warning" aria-hidden="true" title="Editar" (click)="editarProducto(producto.id)"></i><i class="fa fa-trash text-danger" aria-hidden="true" title="Eliminar" (click)="eliminarProducto(producto.id)"></i></td>
                </tr>
              </tbody>
              </table>
            </ng-template>
          </ngb-panel>

        </ngb-accordion>
      </ng-container>
    </div>



    <!-- <div class="col-4">
      <div class="list-group" id="list-tab" role="tablist">
        <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" ngClass="{{categoria.id===1?'active':''}}" id="list-home-list" data-toggle="list" href="#{{categoria.nombre | lowercase | slice:0:5}}" role="tab" *ngFor="let categoria of this.categoriasProductos" >
          <span><i class="fa fa-angle-right" aria-hidden="true"></i> {{categoria.nombre}}</span>
          <span class="badge badge-primary badge-pill">{{categoria.productos.length}}</span>
        </a>
      </div>
    </div>
    <div class="col-8">
      <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade" ngClass="{{categoria.id===1?'show active':''}}" id="{{categoria.nombre | lowercase | slice:0:5}}" role="tabpanel" *ngFor="let categoria of this.categoriasProductos" >
          <ul class="list-unstyled">
            <li class="media mb-4" *ngFor="let producto of categoria.productos" >
              <img src="{{producto.avatar | imagen:'producto':producto.id}}" class="mr-3 avatarProducto" alt="...">
              <div class="media-body">
                <div class="row">
                  <div class="col-10">
                    <h5 class="mt-0 mb-1 text-primary">{{producto.nombre}}</h5>
                    {{producto.descripcion}}
                  </div>
                  <div class="col-2">
                    <h1 class="badge badge-pill badge-secondary precio">{{producto.precio |currency}}</h1>
                    <div class="acciones text-right">
                      <i class="fa fa-edit text-warning" aria-hidden="true" title="Editar" (click)="editarProducto(producto.id)"></i><i class="fa fa-trash text-danger" aria-hidden="true" title="Eliminar" (click)="eliminarProducto(producto.id)"></i>
                    </div>
                  </div>
                </div>
                <hr>
              </div>
            </li>
          </ul>
        </div>

      </div>
    </div> -->
  </div>
  <swal #successSwal title="Información" text="Registro eliminado" type="success" [showCancelButton]="false"
    [focusCancel]="true">
  </swal>
</div>
